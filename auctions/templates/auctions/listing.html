{% extends "auctions/layout.html" %}

{% block body %}
    <div class="listing-wrapper">
        <section class="flex-section">
            <h2>Listing: {{ listing.title }}</h2>
            <form action="{% url 'commerce:toggle_watchlist' listing.id %}" method="post">
                {% csrf_token %} 
                <input class="add-to-watchlist-button" type="submit" value="{{ watchlist }}">
            </form>
        </section>
        
        <img class="listing-page-image" src="{{ listing.image }}"/>
        <section>{{ listing.description }}</section>
        <strong class="bid">${{ listing.current_bid }}</strong>
        {% if message != NULL %} 
            <span class="alert alert-danger">{{ message }}</span>
        {% endif %}  
        <span class="bids-span">{{ bids }} bid(s) so far.</span>
        <span class="bids-span">Current bidder: {{ bidding_user }}</span>
        <form class="bid-form" action="{% url 'commerce:listing' listing.id %}" method="post">
            {% csrf_token %}
            {{ form }}
            <input class="btn btn-primary bid-button" type="submit" value="Place Bid">
        </form>

        <section class="listing-details-section">
            <h3><strong>Details</strong></h3>
            <ul>
                <li>Listed by: {{ listing_user.username }}</li>
                <li>Category: {{ category }}</li>
            </ul>
           
        </section>
    </div>
    

{% endblock %} 